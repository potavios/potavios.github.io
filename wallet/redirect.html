<!DOCTYPE html>
<html>
<head>
    <title>Redirecionando...</title>
    <script type="text/javascript">
        function openAppOrStore() {
            const urlParams = new URLSearchParams(window.location.search);
            const packageId = urlParams.get('packageId');
            const playStoreUrl = "https://play.google.com/store/apps/details?id=" + packageId;

            // Verifica se o app está instalado e tenta abrir
            window.location = "intent://#Intent;scheme=https;package=" + packageId + ";S.browser_fallback_url=" + playStoreUrl + ";end";
            console.log("intent://#Intent;scheme=https;package=" + packageId + ";S.browser_fallback_url=" + playStoreUrl + ";end";)

            // Se o app não estiver instalado, redireciona para a Play Store após 1.5 segundos
            setTimeout(() => {
                if (!document.hidden) { // Se a página ainda estiver visível, o app não foi aberto
                    window.location = playStoreUrl;
                }
            }, 1500);
        }
    </script>
</head>
<body onload="openAppOrStore()">
    <p>Redirecionando...</p>
</body>
</html>
