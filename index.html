<!DOCTYPE html>
<html>
<head>
    <title>Redirecting to wallet...</title>

    <script type="text/javascript">
    // Função para obter parâmetros da URL
    function getParameterByName(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }

    // Função para verificar se o navegador suporta intents
    function openAppOrStore(packageId) {
        const start = Date.now();
        // Tenta abrir o app com o intent
        window.location = "intent://#Intent;scheme=https;package=" + packageId + ";S.browser_fallback_url=https://play.google.com/store/apps/details?id=" + packageId + ";end";

        // Aguarda um tempo para redirecionar para a Play Store caso o app não abra
        setTimeout(function () {
            const elapsed = Date.now() - start;

            // Se o tempo decorrido for menor que um limite (significa que o app não foi aberto)
            if (elapsed < 2000) {
                window.location = "https://play.google.com/store/apps/details?id=" + packageId;
            }
        }, 1500);  // Aguarda 1.5 segundos antes de redirecionar
    }

    // Obtém o packageId da URL
    var packageId = getParameterByName('packageId'); // Pega o valor do parâmetro 'packageId'

    // Verifica se o packageId foi encontrado
    if (packageId) {
        // Tenta abrir o app ou redirecionar para a Play Store
        openAppOrStore(packageId);
    } else {
        // Caso o packageId não seja encontrado
        document.body.innerHTML = "<p>Package ID não encontrado na URL.</p>";
    }
    </script>
</head>
<body>
    <p>Redirecionando...</p>
</body>
</html>
